{% load static %}
{% block content %}
<div id="home" class="relative min-h-screen bg-slate-900 text-white">

    <div id="myModalHome" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ease-in-out">
        <div class="bg-white text-gray-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] relative flex flex-col overflow-hidden">
            <div class="flex justify-between items-center p-5 border-b border-gray-200">
                <h2 class="text-xl font-semibold">Certificado</h2>
                <button id="closeModalHome" aria-label="Cerrar modal" class="text-gray-500 hover:text-red-600 transition-colors p-1 rounded-full focus:outline-none focus:ring-2 focus:ring-red-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="flex-1 p-2 sm:p-4 overflow-y-auto bg-gray-100">
                <img src="{% static 'img/certificaciones/GRUPO-VICAF-CERTIFICADO.jpg' %}"
                     class="w-full h-auto object-contain rounded-md"
                     alt="Certificado GRUPO-VICAF">
            </div>
        </div>
    </div>

    <div class="relative w-full h-screen">

        <div class="absolute rounded-lg px-4 lg:px-0 top-20 lg:left-12 z-20 w-full md:w-1/2 lg:w-1/3 pt-10 pb-6 px-4 sm:px-6 lg:px-8 flex flex-col items-start text-left bg-black/60">
            <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-3 leading-tight" style="text-shadow: 2px 2px 6px rgba(0,0,0,0.6);">
                LABORATORIO DE ENSAYOS ACREDITADO POR INACAL - DA CON REGISTRO N° LE-230
            </h1>
            <p class="text-lg mt-6 sm:text-xl lg:text-2xl text-gray-200 mb-6" style="text-shadow: 1px 1px 4px rgba(0,0,0,0.6);">
                SUELOS - AGREGADOS - CONCRETO - ASFALTO - ROCAS - CAL - CARBÓN
            </p>

            <div class="flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4 mt-6 w-full">
                <button type="button"
                        class="group bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-semibold py-3 px-6 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out hover:scale-105 focus:outline-none focus:ring-4 focus:ring-yellow-400 focus:ring-opacity-50 flex items-center text-sm lg:text-base"
                        onclick="document.getElementById('servicios').scrollIntoView({ behavior: 'smooth' });"
                        onmouseup="this.blur()">
                    Ver Servicios
                    <svg class="w-5 h-5 ml-2 fill-gray-900 transition-transform duration-300 ease-in-out group-hover:translate-x-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                        <path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"/>
                    </svg>
                </button>
                <a href="{% static 'pdf/BROCHURE_2025_VICAF_2025.pdf' %}" target="_blank" rel="noopener noreferrer"
                class="group bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-semibold py-3 px-6 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out hover:scale-105 focus:outline-none focus:ring-4 focus:ring-yellow-400 focus:ring-opacity-50 flex items-center text-sm lg:text-base">
                    Descargar Brochure
                    <svg class="w-5 h-5 ml-2 fill-gray-900 transition-transform duration-300 ease-in-out group-hover:translate-x-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32v242.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64v-32c0-35.3-28.7-64-64-64H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"></path>
                    </svg>
                </a>
            </div>
        </div>

        <div id="carousel" class="absolute inset-0 z-10 w-full h-full overflow-hidden">
            <div class="carousel-item active relative w-full h-full">
                <img src="{% static 'img/inicio/PORTADA5.jpg' %}"
                     alt="Imagen de portada 1: Control de Calidad en Materiales"
                     loading="eager"
                     class="w-full h-full object-cover transition-transform duration-500 ease-in-out hover:scale-105" />
            </div>
            <div class="carousel-item relative w-full h-full hidden">
                <img src="{% static 'img/inicio/PORTADA4.jpeg' %}"
                     alt="Imagen de portada 2: Ensayos de Mecánica de Suelos"
                     loading="lazy"
                     class="w-full h-full object-cover transition-transform duration-500 ease-in-out hover:scale-105" />
            </div>
            <div class="carousel-item relative w-full h-full hidden">
                <img src="{% static 'img/inicio/PORTADA3.jpg' %}"
                     alt="Imagen de portada 3: Estudios de Canteras de Áridos"
                     loading="lazy"
                     class="w-full h-full object-cover transition-transform duration-500 ease-in-out hover:scale-105" />
            </div>
            <div class="carousel-item w-full h-full hidden">
                <img src="{% static 'img/inicio/PORTADA2.jpg' %}"
                     alt="Imagen de portada 4: Evaluación Estructural de Edificaciones"
                     loading="lazy"
                     class="w-full h-full object-cover transition-transform duration-500 ease-in-out hover:scale-105">
            </div>
            <div class="carousel-item w-full h-full hidden">
                <img src="{% static 'img/inicio/PORTADA1.jpg' %}"
                     alt="Imagen de portada 5: Diseño de Mezclas de Concreto y Asfalto"
                     loading="lazy"
                     class="w-full h-full object-cover transition-transform duration-500 ease-in-out hover:scale-105">
            </div>
        </div>

        <div class="absolute hidden bottom-0 left-0 right-0 z-20 bg-transparent backdrop-blur-md py-3 sm:py-4 overflow-hidden shadow-lg">
            <div class="whitespace-nowrap animate-marquee text-center text-white text-sm sm:text-base font-bold tracking-wider">
                PRECISIÓN EN RESULTADOS • ACOMPAÑAMIENTO TÉCNICO • IMPARCIALIDAD Y CONFIDENCIALIDAD • PERSONAL COMPETENTE • EQUIPOS CALIBRADOS
            </div>
        </div>
    </div>
</div>
<div class="fixed bottom-4 z-20 right-4">
    <div class="fixed bottom-4 z-20 right-4 flex justify-center items-center">
        <a href="https://wa.me/+51941573750" target="_blank" class="w-16 h-16 rounded-full bg-green-500 flex justify-center items-center hover:bg-green-600">
            <svg class="w-8 h-8 text-white" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12.04 1.999c-5.523 0-10 4.477-10 10 0 1.767.463 3.47 1.338 4.98l-1.39 5.071 5.196-1.363c1.449.79 3.081 1.212 4.856 1.212 5.523 0 10-4.477 10-10s-4.477-10-10-10zm0 17.5c-1.553 0-3.064-.405-4.394-1.17l-.314-.177-3.085.81.828-3.028-.195-.314c-.835-1.345-1.276-2.894-1.276-4.46 0-4.408 3.592-8 8-8 4.408 0 8 3.592 8 8s-3.592 8-8 8zm4.5-5.95c-.247-.123-1.462-.722-1.69-.803-.228-.081-.395-.123-.561.123-.164.247-.643.802-.787.967-.145.164-.29.184-.538.062-.247-.123-1.042-.383-1.984-1.222-.733-.653-1.228-1.457-1.372-1.704-.144-.247-.015-.38.108-.503.111-.111.247-.29.37-.436.123-.145.164-.247.247-.41.082-.164.041-.308-.02-.431-.061-.123-.538-1.296-.736-1.773-.194-.477-.391-.412-.561-.42-.145-.007-.308-.009-.472-.009-.164 0-.431.062-.654.308-.223.247-.853.832-.853 2.034 0 1.203.874 2.366.996 2.529.123.164 1.715 2.617 4.158 3.674.58.25 1.031.398 1.382.508.581.184 1.109.158 1.526.096.465-.07 1.462-.597 1.668-1.174.205-.576.205-1.071.144-1.175-.06-.103-.226-.164-.472-.287z"/>
            </svg>
        </a>
    </div>        
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const modal = document.getElementById('myModalHome');
        const closeModalButton = document.getElementById('closeModalHome');
        const certificateShownKey = 'VICAFcertificateShownThisSession';

        function openModal() {
            if (modal) {
                modal.classList.remove('hidden');
                modal.style.opacity = '1';
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModalAndMarkAsShown() {
            if (modal) {
                modal.classList.add('hidden');
                modal.style.opacity = '0';
                document.body.style.overflow = '';
                try {
                    sessionStorage.setItem(certificateShownKey, 'true');
                } catch (e) {
                    console.warn("SessionStorage no está disponible o hubo un error:", e);
                }
            }
        }

        try {
            if (!sessionStorage.getItem(certificateShownKey)) {
                openModal();
            }
        } catch (e) {
            console.warn("SessionStorage no está disponible o hubo un error:", e);
        }

        if (closeModalButton) {
            closeModalButton.addEventListener('click', closeModalAndMarkAsShown);
        }
        
        const closeModalHomeSecondary = document.getElementById('closeModalHomeSecondary');
        if (closeModalHomeSecondary) {
            closeModalHomeSecondary.addEventListener('click', closeModalAndMarkAsShown);
        }

        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && modal && !modal.classList.contains('hidden')) {
                closeModalAndMarkAsShown();
            }
        });

        if (modal) {
            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    closeModalAndMarkAsShown();
                }
            });
        }

        const carousel = document.getElementById('carousel');
        if (carousel) {
            const items = carousel.querySelectorAll('.carousel-item');
            let currentIndex = 0;
            const totalItems = items.length;

            function showItem(index) {
                items.forEach((item, i) => {
                    item.classList.toggle('active', i === index);
                    item.classList.toggle('hidden', i !== index);
                });
            }

            if (totalItems > 0) {
                showItem(currentIndex); 
                function nextItem() {
                    currentIndex = (currentIndex + 1) % totalItems;
                    showItem(currentIndex);
                }
            }
        }
    });
</script>

<style>
    @keyframes marquee {
        0% { transform: translateX(100%); }
        100% { transform: translateX(-125%); }
    }
    .animate-marquee {
        animation: marquee 40s linear infinite;
        display: inline-block;
        padding-left: 100%;
        white-space: nowrap;
        min-width: max-content;
    }
    #myModalHome {
        transition: opacity 1s ease-in-out;
    }
</style>
{% endblock %}