{% extends 'base_vicafpro.html' %}
{% load static %}

{% block title %}
{% if form.instance.pk %}Editar Trabajador{% else %}Crear Trabajador{% endif %}
{% endblock %}

{% block content %}
<div class="p-2 lg:p-2 max-w-5xl mx-auto">
    <header class="mb-6">
        <h1 class="text-xl font-extrabold text-white">
            {% if form.instance.pk %}Editar Perfil de Trabajador{% else %}Crear Nuevo Trabajador{% endif %}
        </h1>
        <p class="text-slate-400 mt-1">Completa los campos para {% if form.instance.pk %}actualizar{% else %}crear{% endif %} un perfil de trabajador.</p>
    </header>

    <div class="glass-card rounded-2xl p-8">
        <form method="post" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}
            
            {% if form.non_field_errors %}
                <div class="bg-rose-500/20 text-rose-300 p-4 rounded-lg">
                    <p class="font-bold">Error en el formulario:</p>
                    <ul>
                        {% for error in form.non_field_errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}

            {% for field in form %}
            <div class="flex flex-col">
                <label for="{{ field.id_for_label }}" class="mb-2 text-sm font-medium text-white">{{ field.label }}</label>
                {{ field }}
                {% if field.help_text %}
                <p class="text-xs text-slate-500 mt-1">{{ field.help_text }}</p>
                {% endif %}
                {% if field.errors %}
                <div class="text-sm text-rose-400 mt-1">
                    {% for error in field.errors %}
                    <p>{{ error }}</p>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            {% endfor %}
            
            <div class="flex items-center gap-4 mt-8">
                <button type="submit" class="inline-flex justify-center py-3 px-6 border border-transparent shadow-sm text-sm font-semibold rounded-full text-white bg-emerald-600 hover:bg-emerald-700 transition-colors">
                    {% if form.instance.pk %}Guardar Cambios{% else %}Crear Trabajador{% endif %}
                </button>
                <a href="{% url 'trabajador_list' %}" class="text-slate-400 hover:text-white transition-colors">Cancelar</a>
            </div>
        </form>
    </div>
</div>

<style>
    /* Estilos base para el formulario, se pueden mover a tu CSS global */
    .glass-card input[type="text"],
    .glass-card input[type="email"],
    .glass-card input[type="url"],
    .glass-card select,
    .glass-card textarea {
        width: 100%;
        padding: 0.75rem 1rem;
        background: rgba(45, 55, 72, 0.4); /* Tailwind: slate-800/40 */
        border: 1px solid rgba(100, 116, 139, 0.5); /* Tailwind: slate-600/50 */
        border-radius: 0.5rem;
        color: white;
        transition: border-color 0.2s ease-in-out;
    }

    .glass-card input:focus,
    .glass-card select:focus,
    .glass-card textarea:focus {
        outline: none;
        border-color: #10b981; /* Tailwind: emerald-500 */
    }

    .glass-card label {
        display: block;
    }
</style>
{% endblock %}